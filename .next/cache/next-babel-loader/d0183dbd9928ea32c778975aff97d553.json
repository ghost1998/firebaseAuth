{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/anjan/workspace/firebaseAuth/utils/auth/withAuth.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport router from \"next/router\";\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\"; // import { auth } from \"firebase\";\n\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"./initFirebase\";\nimport { loginRequest, loginSuccess, loginFailure } from \"../../redux/actions/authActions\";\nimport { incrementCounter } from \"../../redux/actions/counterActions\";\n\nvar withAuth = function withAuth(Component) {\n  return /*#__PURE__*/function (_React$Component) {\n    _inherits(_class, _React$Component);\n\n    var _super = _createSuper(_class);\n\n    function _class(props) {\n      var _this;\n\n      _classCallCheck(this, _class);\n\n      _this = _super.call(this, props);\n      _this.state = {\n        status: \"LOADING\"\n      };\n      return _this;\n    }\n\n    _createClass(_class, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        //   this.props.loginRequest();\n        //   this.props.incrementCounter();\n        initFirebase();\n        var auth = firebase.auth();\n        auth.onAuthStateChanged(function (authUser) {\n          console.log(\"hohohoho\");\n          console.log(authUser);\n\n          if (authUser) {\n            _this2.setState({\n              status: \"SIGNED_IN\"\n            });\n          } else {\n            router.push(\"/\");\n          }\n        });\n      }\n    }, {\n      key: \"renderContent\",\n      value: function renderContent() {\n        var status = this.state.status;\n\n        if (status == \"LOADING\") {\n          return __jsx(\"h1\", {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 16\n            }\n          }, \"Loading ......\");\n        } else if (status == \"SIGNED_IN\") {\n          return __jsx(Component, _extends({}, this.props, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 16\n            }\n          }));\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        return __jsx(React.Fragment, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 14\n          }\n        }, this.renderContent()); //   return <React.Fragment>{this.renderContent()}</React.Fragment>;\n      }\n    }]);\n\n    return _class;\n  }(React.Component);\n}; // export default withAuth;\n\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    counter: state.counter.value\n  };\n};\n\nvar mapDispatchToProps = {\n  loginRequest: loginRequest,\n  loginSuccess: loginSuccess,\n  loginFailure: loginFailure,\n  incrementCounter: incrementCounter\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withAuth); // export default connect()(withAuth);\n// export default compose(connect(mapStateToProps, mapDispatchToProps))(withAuth);\n// export default withAuth;","map":{"version":3,"sources":["/Users/anjan/workspace/firebaseAuth/utils/auth/withAuth.js"],"names":["React","router","connect","compose","firebase","initFirebase","loginRequest","loginSuccess","loginFailure","incrementCounter","withAuth","Component","props","state","status","auth","onAuthStateChanged","authUser","console","log","setState","push","renderContent","mapStateToProps","counter","value","mapDispatchToProps"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AAEA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,OAAT,QAAwB,OAAxB,C,CAEA;;AAEA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAASC,YAAT,EAAuBC,YAAvB,EAAqCC,YAArC,QAAyD,iCAAzD;AACA,SAASC,gBAAT,QAAiC,oCAAjC;;AAGA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,SAAD,EAAe;AAC9B;AAAA;;AAAA;;AACE,oBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,gCAAMA,KAAN;AACA,YAAKC,KAAL,GAAa;AACXC,QAAAA,MAAM,EAAE;AADG,OAAb;AAFiB;AAKlB;;AANH;AAAA;AAAA,0CAOwB;AAAA;;AAClB;AACA;AACAT,QAAAA,YAAY;AAEZ,YAAMU,IAAI,GAAGX,QAAQ,CAACW,IAAT,EAAb;AAEAA,QAAAA,IAAI,CAACC,kBAAL,CAAwB,UAACC,QAAD,EAAc;AAC5BC,UAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AAEVD,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,cAAIA,QAAJ,EAAc;AACZ,YAAA,MAAI,CAACG,QAAL,CAAc;AACZN,cAAAA,MAAM,EAAE;AADI,aAAd;AAGD,WAJD,MAIO;AACLb,YAAAA,MAAM,CAACoB,IAAP,CAAY,GAAZ;AACD;AACF,SAXC;AAYH;AA1BH;AAAA;AAAA,sCA2BkB;AAAA,YACNP,MADM,GACK,KAAKD,KADV,CACNC,MADM;;AAEd,YAAIA,MAAM,IAAI,SAAd,EAAyB;AACvB,iBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAP;AACD,SAFD,MAEO,IAAIA,MAAM,IAAI,WAAd,EAA2B;AAChC,iBAAO,MAAC,SAAD,eAAe,KAAKF,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAP;AACD;AACF;AAlCH;AAAA;AAAA,+BAmCW;AACP,eAAO,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAiB,KAAKU,aAAL,EAAjB,CAAP,CADO,CAET;AACC;AAtCH;;AAAA;AAAA,IAAqBtB,KAAK,CAACW,SAA3B;AAwCD,CAzCD,C,CA0CA;;;AAEA,IAAMY,eAAe,GAAG,SAAlBA,eAAkB,CAACV,KAAD;AAAA,SAAY;AAClCW,IAAAA,OAAO,EAAEX,KAAK,CAACW,OAAN,CAAcC;AADW,GAAZ;AAAA,CAAxB;;AAIA,IAAMC,kBAAkB,GAAG;AACzBpB,EAAAA,YAAY,EAAEA,YADW;AAEzBC,EAAAA,YAAY,EAAEA,YAFW;AAGzBC,EAAAA,YAAY,EAAEA,YAHW;AAIzBC,EAAAA,gBAAgB,EAAEA;AAJO,CAA3B;AAMA,eAAeP,OAAO,CAACqB,eAAD,EAAkBG,kBAAlB,CAAP,CAA6ChB,QAA7C,CAAf,C,CACA;AACA;AAEA","sourcesContent":["import React from \"react\";\nimport router from \"next/router\";\n\nimport { connect } from \"react-redux\";\nimport { compose } from \"redux\";\n\n// import { auth } from \"firebase\";\n\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport initFirebase from \"./initFirebase\";\nimport { loginRequest, loginSuccess, loginFailure } from \"../../redux/actions/authActions\";\nimport { incrementCounter } from \"../../redux/actions/counterActions\";\n\n\nconst withAuth = (Component) => {\n  return class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        status: \"LOADING\",\n      };\n    }\n      componentDidMount() {\n        //   this.props.loginRequest();\n        //   this.props.incrementCounter();\n        initFirebase();\n\n        const auth = firebase.auth();\n\n        auth.onAuthStateChanged((authUser) => {\n                  console.log(\"hohohoho\");\n\n        console.log(authUser);\n        if (authUser) {\n          this.setState({\n            status: \"SIGNED_IN\",\n          });\n        } else {\n          router.push(\"/\");\n        }\n      });\n    }\n    renderContent() {\n      const { status } = this.state;\n      if (status == \"LOADING\") {\n        return <h1>Loading ......</h1>;\n      } else if (status == \"SIGNED_IN\") {\n        return <Component {...this.props} />;\n      }\n    }\n    render() {\n      return <React.Fragment>{this.renderContent()}</React.Fragment>;\n    //   return <React.Fragment>{this.renderContent()}</React.Fragment>;\n    }\n  };\n};\n// export default withAuth;\n\nconst mapStateToProps = (state) => ({\n  counter: state.counter.value,\n});\n\nconst mapDispatchToProps = {\n  loginRequest: loginRequest,\n  loginSuccess: loginSuccess,\n  loginFailure: loginFailure,\n  incrementCounter: incrementCounter\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(withAuth);\n// export default connect()(withAuth);\n// export default compose(connect(mapStateToProps, mapDispatchToProps))(withAuth);\n\n// export default withAuth;\n\n"]},"metadata":{},"sourceType":"module"}