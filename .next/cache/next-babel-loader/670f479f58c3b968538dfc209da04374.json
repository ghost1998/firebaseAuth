{"ast":null,"code":"import * as admin from 'firebase-admin';\nexport const verifyIdToken = token => {\n  const firebasePrivateKey = process.env.FIREBASE_PRIVATE_KEY;\n\n  if (!admin.apps.length) {\n    admin.initializeApp({\n      credential: admin.credential.cert({\n        projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n        // https://stackoverflow.com/a/41044630/1332513\n        privateKey: firebasePrivateKey.replace(/\\\\n/g, '\\n')\n      }),\n      databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL\n    });\n  }\n\n  return admin.auth().verifyIdToken(token).catch(error => {\n    throw error;\n  });\n};","map":{"version":3,"sources":["/Users/anjan/workspace/firebaseAuth/utils/auth/firebaseAdmin.js"],"names":["admin","verifyIdToken","token","firebasePrivateKey","process","env","FIREBASE_PRIVATE_KEY","apps","length","initializeApp","credential","cert","projectId","NEXT_PUBLIC_FIREBASE_PROJECT_ID","clientEmail","FIREBASE_CLIENT_EMAIL","privateKey","replace","databaseURL","NEXT_PUBLIC_FIREBASE_DATABASE_URL","auth","catch","error"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,gBAAvB;AAEA,OAAO,MAAMC,aAAa,GAAIC,KAAD,IAAW;AACtC,QAAMC,kBAAkB,GAAGC,OAAO,CAACC,GAAR,CAAYC,oBAAvC;;AAEA,MAAI,CAACN,KAAK,CAACO,IAAN,CAAWC,MAAhB,EAAwB;AACtBR,IAAAA,KAAK,CAACS,aAAN,CAAoB;AAClBC,MAAAA,UAAU,EAAEV,KAAK,CAACU,UAAN,CAAiBC,IAAjB,CAAsB;AAChCC,QAAAA,SAAS,EAAER,OAAO,CAACC,GAAR,CAAYQ,+BADS;AAEhCC,QAAAA,WAAW,EAAEV,OAAO,CAACC,GAAR,CAAYU,qBAFO;AAGhC;AACAC,QAAAA,UAAU,EAAEb,kBAAkB,CAACc,OAAnB,CAA2B,MAA3B,EAAmC,IAAnC;AAJoB,OAAtB,CADM;AAOlBC,MAAAA,WAAW,EAAEd,OAAO,CAACC,GAAR,CAAYc;AAPP,KAApB;AASD;;AAED,SAAOnB,KAAK,CACToB,IADI,GAEJnB,aAFI,CAEUC,KAFV,EAGJmB,KAHI,CAGGC,KAAD,IAAW;AAChB,UAAMA,KAAN;AACD,GALI,CAAP;AAMD,CArBM","sourcesContent":["import * as admin from 'firebase-admin'\n\nexport const verifyIdToken = (token) => {\n  const firebasePrivateKey = process.env.FIREBASE_PRIVATE_KEY\n\n  if (!admin.apps.length) {\n    admin.initializeApp({\n      credential: admin.credential.cert({\n        projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n        clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\n        // https://stackoverflow.com/a/41044630/1332513\n        privateKey: firebasePrivateKey.replace(/\\\\n/g, '\\n'),\n      }),\n      databaseURL: process.env.NEXT_PUBLIC_FIREBASE_DATABASE_URL,\n    })\n  }\n\n  return admin\n    .auth()\n    .verifyIdToken(token)\n    .catch((error) => {\n      throw error\n    })\n}\n"]},"metadata":{},"sourceType":"module"}